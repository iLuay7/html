<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <title id="page-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø¯ÙØ¹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="style.css" />
    <style>
        /* fallback to keep background dark even Ù„Ùˆ ØªØ¹Ø·Ù„ ØªØ­Ù…ÙŠÙ„ style.css */
        html,
        body {
            margin: 0;
            min-height: 100%;
            background: linear-gradient(135deg, #0a1a3a, #021122);
            color: #ffffff;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* force vertical stacked rectangular bank boxes */
        .bank-grid {
            display: flex !important;
            flex-direction: column !important;
            gap: 14px !important;
            align-items: stretch !important;
            max-width: 760px;
            margin: 0 auto 32px auto;
            padding: 12px 16px;
        }

        .bank-box {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            text-align: center !important;
            background: rgba(6, 16, 39, 0.9) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            border-radius: 14px !important;
            padding: 18px 18px !important;
            gap: 10px !important;
            box-shadow: 0 10px 28px rgba(0, 0, 0, 0.35) !important;
            width: 100% !important;
            box-sizing: border-box !important;
            color: #e5edff !important;
        }

        .bank-box .box-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            border-radius: 12px;
            background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 4px 10px rgba(0,0,0,0.25);
            line-height: 1;
            font-size: 26px;
            font-weight: 700;
            padding: 0;
            font-family: "Segoe UI Emoji","Apple Color Emoji","Noto Color Emoji","Segoe UI Symbol",system-ui,sans-serif;
            -webkit-font-smoothing: antialiased;
            transform: translateY(1px);
        }

        .bank-box .box-name {
            font-size: 0.95rem;
            color: #cdd6f0;
            text-align: center;
        }

        /* ensure responsive on small screens */
        @media (max-width: 420px) {
            .bank-grid {
                padding: 8px 10px;
            }

            .bank-box {
                padding: 14px;
            }
        }

        #music-control {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1000;
        }

        #music-toggle-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 24px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        #lang-switcher {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1000;
        }

        #lang-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
            font-weight: bold;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        /* Rain effect */
        .raindrop {
            position: fixed;
            bottom: 100%;
            width: 1px;
            height: 60px;
            pointer-events: none;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.3));
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(110vh);
            }
        }

        /* Dropdown style for unified picker */
        .bank-select { width: 100%; padding: 10px 12px; background: rgba(7,17,46,.85); color: #e5edff; border: 1px solid rgba(255,255,255,.12); border-radius: 10px; }

        /* bg-chase styles moved to style.css */
    </style>
</head>

<body>
    <div class="bg-chase" aria-hidden="true">
        <span class="runner" aria-hidden="true">
            <span class="man">
                <span class="head"></span>
                <span class="torso"></span>
                <span class="arm left"></span>
                <span class="arm right"></span>
                <span class="leg left"></span>
                <span class="leg right"></span>
            </span>
        </span>
        <span class="target">â¬¤</span>
    </div>
    <div id="rain-container"></div>
    <div id="lang-switcher">
        <button id="lang-btn">EN</button>
    </div>
    <audio id="background-music" src="music.mp3" autoplay loop></audio>

    <div id="music-control">
        <button id="music-toggle-btn">ğŸ”‡</button>
    </div>

    <script>
      var music = document.getElementById("background-music");
      const musicToggleBtn = document.getElementById("music-toggle-btn");

      if (music && musicToggleBtn) {
        music.volume = 0.1;

        const updateIcon = () => {
            musicToggleBtn.textContent = (music.paused || music.muted) ? 'ğŸ”‡' : 'ğŸµ';
        };

        music.onplay = music.onpause = music.onvolumechange = updateIcon;

        musicToggleBtn.addEventListener('click', () => {
            if (music.paused) {
                music.muted = false;
                music.play().catch(e => console.error("Play failed", e));
            } else {
                music.muted = !music.muted;
            }
        });

        // gentle fade-in to avoid sudden start
        const fadeTo = 0.1;
        const fadeMs = 800;
        music.volume = 0;

        let playPromise = music.play();
        if (playPromise !== undefined) {
            playPromise.then(_ => {
                music.muted = false;
                const steps = 16;
                const step = fadeTo / steps;
                let i = 0;
                const id = setInterval(() => {
                    i++;
                    music.volume = Math.min(fadeTo, music.volume + step);
                    if (i >= steps) clearInterval(id);
                }, Math.max(10, Math.floor(fadeMs / steps)));
            }).catch(error => {
                // Fallback: try muted autoplay
                music.muted = true;
                music.play().catch(() => {});
            });
        }

        updateIcon();
      }
    </script>

    <!-- copy sound (coin / jump style) -->
    <audio id="copy-sound" preload="auto">
        <source src="explosion.mp3" type="audio/mpeg" />
    </audio>

    <!-- sun glow -->
    <div class="sun"></div>

    <!-- bubbles -->
    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <!-- Header -->
    <div class="header-section">
        <h1 data-key="header-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø¯ÙØ¹</h1>
        <div class="subtitle" data-key="header-subtitle">Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆØ§Ù†Ø³Ø® Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ø¥ØªÙ…Ø§Ù… ØªØ­ÙˆÙŠÙ„Ùƒ Ø¨Ø³Ø±Ø¹Ø©.</div>
    </div>

    <!-- Bank Grid (Single Entry) -->
    <div class="bank-grid" id="bank-grid">
        <div class="bank-box" data-target="modal-bank" role="button" tabindex="0">
            <div class="box-icon">ğŸ¦</div>
            <div class="box-name" data-key="choose-bank">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ</div>
        </div>
    </div>

    <!-- Backdrop -->
    <div class="backdrop" id="backdrop" aria-hidden="true"></div>

    <!-- Unified Bank Picker Modal (Dropdown only) -->
    <div class="card" id="modal-bank" aria-hidden="true">
        <button class="close-modal" type="button">&times;</button>
        <div class="bank-header"><div class="bank-title" id="bank-title" data-key="bank-picker-title">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ</div></div>

        <div class="row" style="display:block;">
            <div class="label" data-key="choose-bank">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ</div>
            <select id="bank-select" class="bank-select" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ">
                <option value="rajhi" data-key="rajhi-name">Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ</option>
                <option value="alinma" data-key="alinma-name">Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡</option>
                <option value="albilad" data-key="albilad-name">Ø§Ù„Ø¨Ù„Ø§Ø¯</option>
                <option value="barq" data-key="barq-name">Ø¨Ø±Ù‚</option>
                <option value="stc">STC</option>
                <option value="mobily" data-key="mobily-name">Ù…ÙˆØ¨Ø§ÙŠÙ„ÙŠ</option>
                <option value="d360">D360</option>
            </select>
        </div>

        <div class="row copy-row">
            <div class="copy-text copy-box" data-copy="iban-current">
                <span class="label" data-key="modal-iban-label">Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†:</span>
                <span class="value" id="iban-current">SA0000000000000000000000</span>
            </div>
            <button class="copy-btn" data-copy="iban-current" type="button" data-key="copy-btn">Ù†Ø³Ø®</button>
        </div>
        <div class="row copy-row">
            <div class="copy-text copy-box" data-copy="acc-current">
                <span class="label" data-key="modal-acc-label">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</span>
                <span class="value" id="acc-current">00000000000000</span>
            </div>
            <button class="copy-btn" data-copy="acc-current" type="button" data-key="copy-btn">Ù†Ø³Ø®</button>
        </div>
    </div>

    <!-- Footer Note -->
    <div class="footer-note">
        <p class="note">
            <span data-key="footer-note-1">Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø·Ø§Ø¨Ù‚Ø© Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ§Ù„Ø¢ÙŠØ¨Ø§Ù† Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„. Ø£Ø¨Ù„Øº ÙÙˆØ±Ø§Ù‹ Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª Ø£ÙŠ Ø®Ø·Ø£.</span>
            <br />
            <span data-key="footer-note-2">Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù…Ù† Ù†Ù†ØµØ­ Ø¨ÙƒØªØ§Ø¨Ø© ÙˆØµÙ ÙˆØ§Ø¶Ø­ Ù„Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„ï¿½ï¿½Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ£ÙƒÙŠØ¯.</span>
        </p>
    </div>

    <!-- comments section -->
    <div class="comments-card">
        <div class="comments-header">
            <h2 class="comments-title" data-key="comments-title">Ø¢Ø±Ø§Ø¤ÙƒÙ… ØªÙ‡Ù…Ù†Ø§</h2>
            <div class="comments-subtitle" data-key="comments-subtitle">Ø´Ø§Ø±Ùƒ ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙˆØªØ¹Ù„ÙŠÙ‚Ùƒ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù†Ø­Ø³Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø©.</div>
        </div>

        <form id="comment-form" class="comment-form">
            <div class="form-row">
                <label for="comment-name" data-key="comment-name-label">Ø§Ù„Ø§Ø³Ù…</label>
                <input id="comment-name" type="text" data-key-placeholder="comment-name-placeholder" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" />
            </div>

            <div class="form-row">
                <label data-key="comment-rating-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</label>
                <div class="stars" id="rating-stars">
                    <span class="star" data-value="1">&#9733;</span><span class="star" data-value="2">&#9733;</span><span class="star" data-value="3">&#9733;</span><span class="star" data-value="4">&#9733;</span><span class="star" data-value="5">&#9733;</span>
                </div>
            </div>

            <div class="form-row">
                <label for="comment-text" data-key="comment-text-label">Ø§Ù„ØªØ¹Ù„ÙŠÙ‚</label>
                <textarea id="comment-text" rows="3" data-key-placeholder="comment-text-placeholder" placeholder="Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ø¨Ø§Ø®ØªØµØ§Ø± Ø­ÙˆÙ„ ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„..." required></textarea>
            </div>

            <button type="submit" class="submit-comment-btn" data-key="comment-submit-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚</button>
        </form>

        <div id="comments-status" class="comments-status" aria-live="polite"></div>

        <div id="comments-list" class="comments-list">
            <p class="no-comments" data-key="no-comments">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯.</p>
        </div>
    </div>

    <script>
        // =================================================================================
        // TRANSLATION SCRIPT
        // =================================================================================
        const translations = {
            'ar': {
                'page-title': 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø¯ÙØ¹',
                'header-title': 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø¯ÙØ¹',
                'header-subtitle': 'Ø§Ø®ØªØ± Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆØ§Ù†Ø³Ø® Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ Ù„Ø¥ØªÙ…Ø§Ù… ØªØ­ÙˆÙŠÙ„Ùƒ Ø¨Ø³Ø±Ø¹Ø©.',
                'rajhi-name': 'Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ',
                'rajhi-desc': 'Ø­Ø³Ø§Ø¨ Ù…ØµØ±Ù Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ',
                'alinma-name': 'Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡',
                'alinma-desc': 'Ø­Ø³Ø§Ø¨ Ø¨Ù†Ùƒ Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡',
                'albilad-name': 'Ø§Ù„Ø¨Ù„Ø§Ø¯',
                'albilad-desc': 'Ø­Ø³Ø§Ø¨ Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯',
                'barq-name': 'Ø¨Ø±Ù‚',
                'barq-desc': 'Ù…Ø­ÙØ¸Ø© Ø¨Ø±Ù‚ (Barq)',
                'stc-desc': 'STC Pay',
                'mobily-name': 'Ù…ÙˆØ¨Ø§ÙŠÙ„ÙŠ',
                'mobily-desc': 'Mobily Pay',
                'd360-desc': 'D360 Bank',
                'modal-desc-label': 'Ø§Ù„ÙˆØµÙ:',
                'modal-desc-value': 'Ø§ÙƒØªØ¨ ÙˆØµÙ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø±ØºØ¨Øª.',
                'modal-iban-label': 'Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†:',
                'modal-acc-label': 'Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:',
                'copy-btn': 'Ù†Ø³Ø®',
                'copy-btn-copied': 'ØªÙ… Ø§Ù„Ù†Ø³Ø®!',
                'footer-note-1': 'Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø·Ø§Ø¨Ù‚Ø© Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ§Ù„Ø¢ÙŠØ¨Ø§Ù† Ù‚Ø¨Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„. Ø£Ø¨Ù„Øº ÙÙˆØ±Ø§Ù‹ Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª Ø£ÙŠ Ø®Ø·Ø£.',
                'footer-note-2': 'Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù…Ù† Ù†Ù†ØµØ­ Ø¨ÙƒØªØ§Ø¨Ø© ÙˆØµÙ ÙˆØ§Ø¶Ø­ Ù„Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ£ÙƒÙŠØ¯.',
                'comments-title': 'Ø¢Ø±Ø§Ø¤ÙƒÙ… ØªÙ‡Ù…Ù†Ø§',
                'comments-subtitle': 'Ø´Ø§Ø±Ùƒ ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙˆØªØ¹Ù„ÙŠÙ‚Ùƒ ï¿½ï¿½Ù„Ø³Ø±ÙŠØ¹ Ù„Ù†Ø­Ø³Ù† Ø§Ù„ØªØ¬Ø±Ø¨Ø©.',
                'comment-name-label': 'Ø§Ù„Ø§Ø³Ù…',
                'comment-name-placeholder': 'Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ',
                'comment-rating-label': 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…',
                'comment-text-label': 'Ø§Ù„ØªØ¹Ù„ÙŠÙ‚',
                'comment-text-placeholder': 'Ø§ÙƒØªØ¨ Ø±Ø£ÙŠÙƒ Ø¨Ø§Ø®ØªØµØ§Ø± Ø­ÙˆÙ„ ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„...',
                'comment-submit-btn': 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚',
                'no-comments': 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯.',
                'anonymous-user': 'Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…',
                'comment-required': 'Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.',
                'comment-sending': 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù„ÙŠÙ‚Ùƒ...',
                'comment-success': 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù„ÙŠÙ‚ÙƒØŒ Ø´ÙƒØ±Ø§Ù‹!',
                'comment-error': 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                'gscript-warning': 'ØªÙ†Ø¨ÙŠÙ‡: Ø±Ø§Ø¨Ø· Google Apps Script ØºÙŠØ± Ù…Ù‡ÙŠØ£ØŒ Ù„Ù† ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª.',
                'comments-loading': 'Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª...',
                'comments-load-error': 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§ØªØŒ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.',
                'comment-thanks': 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨ØªØ¹Ù„ÙŠÙ‚Ùƒ!',
                'choose-bank': 'Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ',
                'bank-picker-title': 'Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù†Ùƒ'
            },
            'en': {
                'page-title': 'Payment and Transfer Information',
                'header-title': 'Payment and Transfer Information',
                'header-subtitle': 'Choose a service provider and copy the account details to complete your transfer quickly.',
                'rajhi-name': 'Al Rajhi',
                'rajhi-desc': 'Al Rajhi Bank Account',
                'alinma-name': 'Alinma',
                'alinma-desc': 'Alinma Bank Account',
                'albilad-name': 'Albilad',
                'albilad-desc': 'Bank Albilad Account',
                'barq-name': 'Barq',
                'barq-desc': 'Barq Wallet',
                'stc-desc': 'STC Pay',
                'mobily-name': 'Mobily',
                'mobily-desc': 'Mobily Pay',
                'd360-desc': 'D360 Bank',
                'modal-desc-label': 'Description:',
                'modal-desc-value': 'Write the transfer description here if you wish.',
                'modal-iban-label': 'IBAN:',
                'modal-acc-label': 'Account Number:',
                'copy-btn': 'Copy',
                'copy-btn-copied': 'Copied!',
                'footer-note-1': 'Note: Please verify the account number and IBAN before transferring. Report any errors immediately.',
                'footer-note-2': 'For secure use, we recommend writing a clear transfer description and communicating through official channels for confirmation.',
                'comments-title': 'Your Feedback Matters',
                'comments-subtitle': 'Share your quick rating and comment to improve the experience.',
                'comment-name-label': 'Name',
                'comment-name-placeholder': 'e.g., John Doe',
                'comment-rating-label': 'Rating',
                'comment-text-label': 'Comment',
                'comment-text-placeholder': 'Briefly write your opinion about the transfer experience...',
                'comment-submit-btn': 'Submit Comment',
                'no-comments': 'No comments yet.',
                'anonymous-user': 'Anonymous User',
                'comment-required': 'Please write a comment before submitting.',
                'comment-sending': 'Submitting your comment...',
                'comment-success': 'Your comment has been sent, thank you!',
                'comment-error': 'An error occurred while sending the comment, please try again.',
                'gscript-warning': 'Warning: Google Apps Script URL is not configured, comments will not be saved.',
                'comments-loading': 'Loading comments...',
                'comments-load-error': 'An error occurred while loading comments, please try again later.',
                'comment-thanks': 'Thank you for sharing your comment!',
                'choose-bank': 'Choose bank',
                'bank-picker-title': 'Choose bank'
            }
        };

        let currentLang = 'ar';

        const setLanguage = (lang) => {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            document.querySelectorAll('[data-key-placeholder]').forEach(element => {
                const key = element.getAttribute('data-key-placeholder');
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });

            const pageTitle = document.getElementById('page-title');
            if (pageTitle) {
                pageTitle.textContent = translations[lang]['page-title'];
            }
            renderComments();
            checkAndDisableCommenting();
        };
        
        const langBtn = document.getElementById('lang-btn');
        langBtn.addEventListener('click', () => {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            langBtn.textContent = currentLang === 'ar' ? 'EN' : 'AR';
            setLanguage(currentLang);
        });

        // =================================================================================
        // MODAL SCRIPT
        // =================================================================================
        const backdrop = document.getElementById("backdrop");
        const bankBoxes = document.querySelectorAll(".bank-box");
        const closeButtons = document.querySelectorAll(".close-modal");
        const modalCards = document.querySelectorAll(".card");

        function openModal(cardId) {
            const card = document.getElementById(cardId);
            if (card) {
                backdrop.classList.add("active");
                card.classList.add("active");
            }
        }

        function closeModal() {
            backdrop.classList.remove("active");
            modalCards.forEach(c => c.classList.remove("active"));
        }

        bankBoxes.forEach(box => {
            box.addEventListener("click", () => openModal(box.dataset.target));
            box.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    openModal(box.dataset.target);
                }
            });
        });

        closeButtons.forEach(btn => btn.addEventListener("click", closeModal));
        backdrop.addEventListener("click", closeModal);
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeModal();
        });

        // =================================================================================
        // COPY BUTTONS SCRIPT
        // =================================================================================
        const copySound = document.getElementById("copy-sound");
        if (copySound) copySound.volume = 0.5;

        function copyById(id, feedbackEl) {
            const text = document.getElementById(id)?.textContent.trim();
            if (!text) return;
            navigator.clipboard.writeText(text).then(() => {
                if (feedbackEl) {
                    showCopiedState(feedbackEl);
                }
                playCopySound();
            }).catch(playCopySound);
        }

        document.querySelectorAll(".copy-btn").forEach(btn => {
            btn.addEventListener("click", () => copyById(btn.dataset.copy, btn));
        });

        function showCopiedState(btn) {
            const originalText = translations[currentLang]['copy-btn'];
            const copiedText = translations[currentLang]['copy-btn-copied'];
            if (btn && btn.classList.contains('copy-btn')) {
                btn.textContent = copiedText;
                btn.classList.add("copied");
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove("copied");
                }, 1200);
            }
        }

        function playCopySound() {
            if (!copySound) return;
            copySound.currentTime = 0;
            copySound.play().catch(() => {});
        }

        // Also allow clicking the value area to copy
        document.addEventListener('click', (e) => {
            const box = e.target.closest('.copy-box');
            if (!box) return;
            const id = box.getAttribute('data-copy');
            const siblingBtn = box.parentElement?.querySelector('.copy-btn');
            copyById(id, siblingBtn);
        });

        // =================================================================================
        // COMMENTS + BANK PICKER SCRIPT
        // =================================================================================
        const commentsApiUrl = "https://script.google.com/macros/s/AKfycbxOB1GoZp3FRysVzPDRvbTaJw8hPS8_lT2lz9C_4FiKrWNOWZPsQHrkBkitlp9WdrPv/exec";
        const commentsListEl = document.getElementById("comments-list");
        const commentsStatusEl = document.getElementById("comments-status");
        const commentForm = document.getElementById("comment-form");
        const commentsCard = document.querySelector(".comments-card");
        let comments = [];
        const LOCAL_COMMENTS_KEY = "comments_cache";
        const HAS_COMMENTED_KEY = 'has_commented';

        const BANKS = {
            rajhi: { nameKey: 'rajhi-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            alinma: { nameKey: 'alinma-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            albilad: { nameKey: 'albilad-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            barq: { nameKey: 'barq-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            stc: { nameKey: 'stc-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            mobily: { nameKey: 'mobily-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' },
            d360: { nameKey: 'd360-desc', iban: 'SA0000000000000000000000', acc: '00000000000000' }
        };

        const ibanCurrent = document.getElementById('iban-current');
        const accCurrent = document.getElementById('acc-current');
        const bankSelect = document.getElementById('bank-select');

        function setBank(bankId) {
            const bank = BANKS[bankId] || BANKS['rajhi'];
            if (ibanCurrent) ibanCurrent.textContent = bank.iban;
            if (accCurrent) accCurrent.textContent = bank.acc;
            const bankTitleEl = document.getElementById('bank-title');
            if (bankTitleEl) bankTitleEl.textContent = translations[currentLang][bank.nameKey] || translations[currentLang]['bank-picker-title'];
            if (bankSelect) bankSelect.value = bankId;
        }

        if (bankSelect) bankSelect.addEventListener('change', (e) => setBank(e.target.value));

        function checkAndDisableCommenting() {
            if (localStorage.getItem(HAS_COMMENTED_KEY) === 'true') {
                if (commentForm) {
                    commentForm.style.display = 'none';
                }
                const oldMsg = commentsCard.querySelector('.thank-you-comment');
                if (oldMsg) {
                    oldMsg.remove();
                }
                const thankYouMsg = document.createElement('p');
                thankYouMsg.textContent = translations[currentLang]['comment-thanks'];
                thankYouMsg.className = 'thank-you-comment';
                thankYouMsg.style.textAlign = 'center';
                thankYouMsg.style.padding = '20px';
                commentsCard.appendChild(thankYouMsg);
            }
        }

        function loadLocalComments() {
            try {
                const raw = localStorage.getItem(LOCAL_COMMENTS_KEY);
                return raw ? (JSON.parse(raw) || []) : [];
            } catch (e) {
                return [];
            }
        }

        function persistLocalComments(list) {
            try {
                localStorage.setItem(LOCAL_COMMENTS_KEY, JSON.stringify(list || []));
            } catch (e) {}
        }

        function setCommentsStatus(messageKey, isError = false) {
            if (!commentsStatusEl) return;
            const message = translations[currentLang][messageKey] || messageKey || '';
            commentsStatusEl.textContent = message;
            commentsStatusEl.classList.toggle("error", isError);
        }

        function renderComments() {
            if (!commentsListEl) return;
            commentsListEl.innerHTML = "";
            if (!comments || comments.length === 0) {
                commentsListEl.innerHTML = `<p class="no-comments" data-key="no-comments">${translations[currentLang]['no-comments']}</p>`;
                return;
            }
            comments.forEach(c => {
                const item = document.createElement("div");
                item.className = "comment-item";
                const header = document.createElement("div");
                header.className = "comment-header";
                const nameEl = document.createElement("div");
                nameEl.className = "comment-name";
                nameEl.textContent = c.name || translations[currentLang]['anonymous-user'];
                const starsEl = document.createElement("div");
                starsEl.className = "comment-stars";
                const rating = Number(c.rating || 0);
                starsEl.textContent = "â˜…".repeat(rating) + "â˜†".repeat(5 - rating);
                header.appendChild(nameEl);
                header.appendChild(starsEl);
                const body = document.createElement("div");
                body.className = "comment-text";
                body.textContent = c.text || "";
                item.appendChild(header);
                item.appendChild(body);
                commentsListEl.appendChild(item);
            });
        }

        async function fetchComments() {
            if (!commentsApiUrl || commentsApiUrl.includes("REPLACE_WITH_YOUR_DEPLOYMENT_ID")) {
                setCommentsStatus("gscript-warning", true);
                renderComments();
                return;
            }
            setCommentsStatus("comments-loading");
            try {
                const response = await fetch(commentsApiUrl, { method: "GET", cache: "no-store" });
                if (!response.ok) throw new Error("comments-load-error");
                const data = await response.json();
                comments = Array.isArray(data.comments) ? data.comments : [];
                renderComments();
                persistLocalComments(comments);
                setCommentsStatus(comments.length ? "" : "no-comments");
            } catch (error) {
                console.error(error);
                setCommentsStatus(error.message || "comments-load-error", true);
            }
        }

        async function sendCommentToGoogle(payload) {
            if (!commentsApiUrl || commentsApiUrl.includes("REPLACE_WITH_YOUR_DEPLOYMENT_ID")) {
                throw new Error("gscript-warning");
            }
            const response = await fetch(commentsApiUrl, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify(payload)
            });
        }

        let currentRating = 5;
        const starElems = document.querySelectorAll(".star");
        function updateStarView() {
            starElems.forEach(star => {
                star.classList.toggle("selected", Number(star.dataset.value) <= currentRating);
            });
        }
        starElems.forEach(star => {
            star.addEventListener("click", () => {
                currentRating = Number(star.dataset.value);
                updateStarView();
            });
        });
        
        const commentNameInput = document.getElementById("comment-name");
        const commentTextInput = document.getElementById("comment-text");
        const submitBtn = document.querySelector(".submit-comment-btn");

        commentForm.addEventListener("submit", async (e) => {
            e.preventDefault();
            const name = (commentNameInput.value || "").trim() || translations[currentLang]['anonymous-user'];
            const text = (commentTextInput.value || "").trim();
            if (!text) {
                setCommentsStatus("comment-required", true);
                return;
            }
            const newComment = { name, text, rating: currentRating };
            
            submitBtn.disabled = true;
            submitBtn.textContent = translations[currentLang]['comment-sending'];
            
            try {
                setCommentsStatus("");
                await sendCommentToGoogle(newComment);
                setCommentsStatus("comment-success");
                localStorage.setItem(HAS_COMMENTED_KEY, 'true');
                checkAndDisableCommenting();
                comments.unshift({ ...newComment, timestamp: new Date().toISOString() });
                renderComments();
                setTimeout(fetchComments, 2000);
            } catch (err) {
                console.error(err);
                setCommentsStatus(err.message || "comment-error", true);
                submitBtn.disabled = false;
                submitBtn.textContent = translations[currentLang]['comment-submit-btn'];
            }
        });

        // Initial Load
        document.addEventListener('DOMContentLoaded', () => {
            comments = loadLocalComments();
            updateStarView();
            setLanguage(currentLang);
            setBank('rajhi');
            fetchComments();
            checkAndDisableCommenting();
        });

    </script>

    <script>
        // Rain Effect Script
        function createRain() {
            const rainContainer = document.getElementById('rain-container');
            if (!rainContainer) return;
            const numberOfDrops = 150;
            for (let i = 0; i < numberOfDrops; i++) {
                const drop = document.createElement('div');
                drop.className = 'raindrop';
                const left = Math.random() * 100;
                const duration = (Math.random() * 0.5) + 0.5;
                const delay = Math.random() * 5;
                drop.style.left = `${left}vw`;
                drop.style.animationDuration = `${duration}s`;
                drop.style.animationDelay = `${delay}s`;
                rainContainer.appendChild(drop);
            }
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createRain);
        } else {
            createRain();
        }
    </script>

</body>

</html>
