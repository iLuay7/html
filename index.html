<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>جميع حساباتي البنكية</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>

    <!-- copy sound (coin / jump style) -->
    <audio id="copy-sound" preload="auto">
        <source src="explosion.mp3" type="audio/mpeg" />
    </audio>

    <!-- sun glow -->
    <div class="sun"></div>

    <!-- bubbles -->
    <div class="bubbles">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <div class="card">
        <h1>جميع حساباتي البنكية</h1>
        <p class="subtitle">اختر أي حساب وادخل عليه مباشرة من تطبيق بنكك أو تطبيق البنك.</p>

        <div class="bank">
            <div class="bank-title">البنك الراجحي</div>

            <div class="row">
                <span class="label">اسم المستفيد:</span>
                <span class="value">عمرو محمد أحمد</span>
            </div>

            <div class="row copy-row">
                <div class="copy-text">
                    <span class="label">رقم الحساب:</span>
                    <span class="value" id="rajhi-account">1234567890</span>
                </div>
                <button class="copy-btn" data-copy="rajhi-account">نسخ</button>
            </div>

            <div class="row copy-row">
                <div class="copy-text">
                    <span class="label">رقم الآيبان (IBAN):</span>
                    <span class="value" id="rajhi-iban">SA00 0000 0000 0000 0000 0000</span>
                </div>
                <button class="copy-btn" data-copy="rajhi-iban">نسخ</button>
            </div>
        </div>

        <div class="bank">
            <div class="bank-title">البنك الأهلي السعودي</div>

            <div class="row">
                <span class="label">اسم المستفيد:</span>
                <span class="value">عمرو محمد أحمد</span>
            </div>

            <div class="row copy-row">
                <div class="copy-text">
                    <span class="label">رقم الحساب:</span>
                    <span class="value" id="ahli-account">9876543210</span>
                </div>
                <button class="copy-btn" data-copy="ahli-account">نسخ</button>
            </div>

            <div class="row copy-row">
                <div class="copy-text">
                    <span class="label">رقم الآيبان (IBAN):</span>
                    <span class="value" id="ahli-iban">SA11 1111 1111 1111 1111 1111</span>
                </div>
                <button class="copy-btn" data-copy="ahli-iban">نسخ</button>
            </div>
        </div>

        <p class="note">
            الرجاء التأكد من تطابق اسم المستفيد ورقم الآيبان قبل تنفيذ التحويل. لأي استفسار يرجى التواصل معي على الواتساب.
        </p>
    </div>

    <!-- comments section -->
    <div class="comments-card">
        <div class="comments-header">
            <h2 class="comments-title">التعليقات والتقييم</h2>
            <div class="comments-subtitle">اكتب رأيك وقيم التجربة بالنجمات.</div>
        </div>

        <form id="comment-form" class="comment-form">
            <div class="form-row">
                <label for="comment-name">الاسم</label>
                <input id="comment-name" type="text" placeholder="مثال: أبو محمد" />
            </div>

            <div class="form-row">
                <label>التقييم</label>
                <div class="stars" id="rating-stars">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                </div>
            </div>

            <div class="form-row">
                <label for="comment-text">التعليق</label>
                <textarea id="comment-text" rows="3" placeholder="اكتب تعليقك هنا..."></textarea>
            </div>

            <button type="submit" class="submit-comment-btn">إرسال التقييم</button>
        </form>

        <div id="comments-list" class="comments-list"></div>
    </div>

    <script>
        // copy buttons + sound
        const copySound = document.getElementById("copy-sound");

        document.querySelectorAll(".copy-btn").forEach(function (btn) {
            btn.addEventListener("click", function () {
                const targetId = btn.getAttribute("data-copy");
                const el = document.getElementById(targetId);
                if (!el) return;
                const text = el.textContent.trim();

                if (!navigator.clipboard) {
                    const tempInput = document.createElement("input");
                    tempInput.value = text;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand("copy");
                    document.body.removeChild(tempInput);
                    showCopiedState(btn);
                    playCopySound();
                    return;
                }

                navigator.clipboard.writeText(text).then(function () {
                    showCopiedState(btn);
                    playCopySound();
                }).catch(function () {
                    playCopySound();
                });
            });
        });

        function showCopiedState(btn) {
            const originalText = btn.textContent;
            btn.textContent = "✓";
            btn.classList.add("copied");
            setTimeout(function () {
                btn.textContent = originalText;
                btn.classList.remove("copied");
            }, 1200);
        }

        function playCopySound() {
            if (!copySound) return;
            try {
                copySound.currentTime = 0;
                copySound.play().catch(function () {});
            } catch (e) {}
        }

        // comments (localStorage based)
        const commentsKey = "bank-comments-v1";
        let comments = loadComments();

        function loadComments() {
            const saved = localStorage.getItem(commentsKey);
            if (!saved) return [];
            try {
                return JSON.parse(saved);
            } catch (e) {
                return [];
            }
        }

        function saveComments() {
            localStorage.setItem(commentsKey, JSON.stringify(comments));
        }

        function renderComments() {
            const container = document.getElementById("comments-list");
            container.innerHTML = "";

            if (!comments || comments.length === 0) {
                container.innerHTML = '<p class="no-comments">لا توجد تعليقات بعد.</p>';
                return;
            }

            comments.forEach(function (c) {
                const item = document.createElement("div");
                item.className = "comment-item";

                const header = document.createElement("div");
                header.className = "comment-header";

                const nameEl = document.createElement("div");
                nameEl.className = "comment-name";
                nameEl.textContent = c.name || "زائر";

                const starsEl = document.createElement("div");
                starsEl.className = "comment-stars";
                const rating = Number(c.rating || 0);
                let starsText = "";
                for (let i = 1; i <= 5; i++) {
                    starsText += i <= rating ? "★" : "☆";
                }
                starsEl.textContent = starsText;

                header.appendChild(nameEl);
                header.appendChild(starsEl);

                const body = document.createElement("div");
                body.className = "comment-text";
                body.textContent = c.text || "";

                item.appendChild(header);
                item.appendChild(body);

                container.appendChild(item);
            });
        }

        let currentRating = 5;
        const starElems = document.querySelectorAll(".star");

        function updateStarView() {
            starElems.forEach(function (star) {
                const value = Number(star.getAttribute("data-value"));
                star.classList.toggle("selected", value <= currentRating);
            });
        }

        starElems.forEach(function (star) {
            star.addEventListener("click", function () {
                const value = Number(star.getAttribute("data-value"));
                currentRating = value;
                updateStarView();
            });
        });

        updateStarView();
        renderComments();

        const commentForm = document.getElementById("comment-form");
        const commentNameInput = document.getElementById("comment-name");
        const commentTextInput = document.getElementById("comment-text");

        commentForm.addEventListener("submit", function (e) {
            e.preventDefault();

            const name = (commentNameInput.value || "").trim() || "زائر";
            const text = (commentTextInput.value || "").trim();

            if (!text) {
                return;
            }

            const newComment = {
                id: Date.now(),
                name: name,
                text: text,
                rating: currentRating || 0
            };

            comments.unshift(newComment);
            saveComments();
            renderComments();

            commentForm.reset();
            currentRating = 5;
            updateStarView();
        });
    </script>
</body>
</html>
